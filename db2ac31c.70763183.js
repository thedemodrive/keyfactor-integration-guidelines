(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{68:function(e,t,i){"use strict";i.r(t),i.d(t,"frontMatter",(function(){return o})),i.d(t,"metadata",(function(){return s})),i.d(t,"rightToc",(function(){return l})),i.d(t,"default",(function(){return r}));var n=i(2),a=(i(0),i(75));const o={id:"istio",title:"Install Istio",sidebar_label:"Install Istio",slug:"/istio"},s={unversionedId:"istio",id:"istio",isDocsHomePage:!1,title:"Install Istio",description:"1. Install cli istioctl",source:"@site/docs/istio.md",slug:"/istio",permalink:"/keyfactor-integration-guidelines/docs/istio",editUrl:"https://github.com/thedemodrive/keyfactor-integration-guidelines/blob/master/docs/istio.md",version:"current",sidebar_label:"Install Istio",sidebar:"someSidebar",previous:{title:"Install",permalink:"/keyfactor-integration-guidelines/docs/install"},next:{title:"Istio Examples",permalink:"/keyfactor-integration-guidelines/docs/istio/samples"}},l=[{value:"1. Install cli <code>istioctl</code>",id:"1-install-cli-istioctl",children:[]},{value:"2. Install Istio",id:"2-install-istio",children:[]}],c={rightToc:l};function r({components:e,...t}){return Object(a.b)("wrapper",Object(n.a)({},c,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("h3",{id:"1-install-cli-istioctl"},"1. Install cli ",Object(a.b)("inlineCode",{parentName:"h3"},"istioctl")),Object(a.b)("p",null,"Download & extract prebuilt version for sepecific OS:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"OSX: ",Object(a.b)("inlineCode",{parentName:"li"},"istioctl-osx")," - ",Object(a.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/thedemodrive/keyfactor-integration-guidelines/releases/download/1.0.0/istioctl-osx.zip"}),"Download Here")),Object(a.b)("li",{parentName:"ul"},"Linux: ",Object(a.b)("inlineCode",{parentName:"li"},"istioctl-linux-amd64")," - ",Object(a.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/thedemodrive/keyfactor-integration-guidelines/releases/download/1.0.0/istioctl-linux-amd64.zip"}),"Download Here")),Object(a.b)("li",{parentName:"ul"},"Windows: ",Object(a.b)("inlineCode",{parentName:"li"},"istioctl-win.exe")," - ",Object(a.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/thedemodrive/keyfactor-integration-guidelines/releases/download/1.0.0/istioctl-win.exe.zip"}),"Download Here"))),Object(a.b)("p",null,"Extract and add ",Object(a.b)("inlineCode",{parentName:"p"},"istioctl")," client to your path (Linux or macOS or Windows):"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"All of packages are included at the following URL: ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/thedemodrive/keyfactor-integration-guidelines/releases/tag/1.0.0"}),"Click Here"))),Object(a.b)("h3",{id:"2-install-istio"},"2. Install Istio"),Object(a.b)("p",null,"After installed Keyfactor Kubernetes Proxy (at step: ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/install"}),"Get Start > Install"),").\nKeyfactor Kubernetes Proxy will automatically provisioning TLS Client Certificates for Istio by creating a Kubernetes Secret (default name: ",Object(a.b)("inlineCode",{parentName:"p"},"custom-ca-tls"),") within namespace ",Object(a.b)("inlineCode",{parentName:"p"},"istio-system")),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"Note: Please return ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/install#3-install-finished"}),"this step")," to get more detail")),Object(a.b)("p",null,"Update ",Object(a.b)("inlineCode",{parentName:"p"},"manifests/istio-config.yaml")," by using printed values on step ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/install#3-install-finished"}),"Get Start > Install"),")"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"Note: ",Object(a.b)("inlineCode",{parentName:"p"},"manifests/istio-config.yaml")," is extracted from ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/install#1-download-and-extract-bundle"}),"install step"))),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yaml"}),'apiVersion: install.istio.io/v1alpha1\nkind: IstioOperator\nmetadata:\n  namespace: istio-system\nspec:\n  hub: thedemodrive\n  tag: 1.8-keyfactor\n  # Path to directory contains Istio\'s charts\n  installPackagePath: "manifests/charts"\n  profile: "demo"\n  values:\n    pilot:\n      secretVolumes:\n        - name: <REPLACE_SECRET_NAME>\n          secretName: <REPLACE_SECRET_NAME>\n          mountPath: /etc/istio/<REPLACE_SECRET_NAME>\n  meshConfig:\n    ca:\n      # Use istiod_side to specify CA Server integrate to Istiod side or Agent side\n      istiodSide: true\n      # Address of the CA server implementing the Istio CA gRPC API.\n      # Can be IP address or a fully qualified DNS name with port\n      # Eg: custom-ca.default.svc.cluster.local:8932, 192.168.23.2:9000\n      # If specified, Istio will authorize and forward the CSRs from the workloads to the specified external CA\n      # using the Istio CA gRPC API.\n      address: <REPLACE_ADDRESS>:<REPLACE_PORT>\n      # timeout for forward CSR requests from Istiod to External CA\n      # Default: 20s\n      requestTimeout: 20s\n      # Default TLS mode is MUTUAL, It\'s require to specific TLS client certificate files.\n      # According sistiodSide = true, TLS files could be mounted from Kubernetes Secret\n      # configurable via values.pilot.secretVolumes\n      tlsSettings:\n        mode: MUTUAL # Supported values: DISABLE, MUTUAL\n        clientCertificate: "/etc/istio/<REPLACE_SECRET_NAME>/client-cert.pem"\n        privateKey: "/etc/istio/<REPLACE_SECRET_NAME>/client-key.pem"\n        caCertificates: "/etc/istio/<REPLACE_SECRET_NAME>/cacert.pem"\n        sni: <REPLACE_ADDRESS>\n        subjectAltNames: []\n')),Object(a.b)("p",null,"Install istio via ",Object(a.b)("inlineCode",{parentName:"p"},"istioclt")),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"istioctl install -f manifests/istio-config.yaml\n")))}r.isMDXComponent=!0}}]);